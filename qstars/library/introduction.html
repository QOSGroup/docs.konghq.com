<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SDK development for iOS and Android | QStars Network</title>
    <meta name="description" content="Documentation for the QStars Network.">
    
    
    <link rel="preload" href="/qstars/assets/css/styles.f2fdf5fd.css" as="style"><link rel="preload" href="/qstars/assets/js/app.f2fdf5fd.js" as="script"><link rel="preload" href="/qstars/assets/js/10.c1d5a24e.js" as="script"><link rel="prefetch" href="/qstars/assets/js/6.69ea02b7.js"><link rel="prefetch" href="/qstars/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/qstars/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/qstars/assets/css/2.styles.611b8f42.css"><link rel="prefetch" href="/qstars/assets/js/2.611b8f42.js"><link rel="prefetch" href="/qstars/assets/js/3.6fd5f279.js"><link rel="prefetch" href="/qstars/assets/js/4.a2fd0d33.js"><link rel="prefetch" href="/qstars/assets/js/5.df91e7cc.js"><link rel="prefetch" href="/qstars/assets/js/7.93287d28.js"><link rel="prefetch" href="/qstars/assets/js/8.ada1072f.js"><link rel="prefetch" href="/qstars/assets/js/9.dd5c6c13.js"><link rel="prefetch" href="/qstars/assets/js/11.305e21e4.js"><link rel="prefetch" href="/qstars/assets/js/12.5c16bb42.js"><link rel="prefetch" href="/qstars/assets/js/13.bf8dc304.js"><link rel="prefetch" href="/qstars/assets/js/14.3c89cd92.js"><link rel="prefetch" href="/qstars/assets/js/15.ecaf9533.js">
    <link rel="stylesheet" href="/qstars/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/qstars/assets/css/2.styles.611b8f42.css"><link rel="stylesheet" href="/qstars/assets/css/styles.f2fdf5fd.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/qstars/" class="home-link router-link-active"><!----> <span class="site-name">QStars Network</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://qstar.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to QStars
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://qstar.network" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to QStars
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/qstars/" class="sidebar-link">Hello QStars!</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/qstars/getting-started/installation.html" class="sidebar-link">Install the QStars</a></li><li><a href="/qstars/getting-started/full-node.html" class="sidebar-link">Join the Testnet</a></li><li><a href="/qstars/getting-started/create-testnet.html" class="sidebar-link">Create your Own single node QStars</a></li><li><a href="/qstars/getting-started/commands.html" class="sidebar-link">Configure command line tools</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>SDK Usage</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/qstars/sdk/kvstore.html" class="sidebar-link">One example of transaction</a></li><li><a href="/qstars/sdk/qstarsclicmd.html" class="sidebar-link">How to use command line</a></li><li><a href="/qstars/sdk/qstarsclirestful.html" class="sidebar-link">How to use restful</a></li><li><a href="/qstars/sdk/transactionmessage.html" class="sidebar-link">input</a></li><li><a href="/qstars/sdk/app-init.html" class="sidebar-link">开发自己的联盟链业务模块</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>library</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/qstars/library/introduction.html" class="active sidebar-link">SDK development for iOS and Android</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#environment-prerequisites" class="sidebar-link">Environment prerequisites:</a></li><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#gomobile-installation" class="sidebar-link">Gomobile installation</a></li><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#android-sdk-environment-setting" class="sidebar-link">Android SDK environment setting</a></li><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#shared-go-code-for-android-and-ios" class="sidebar-link">Shared GO-code for Android and iOS</a></li><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#fetch-the-source-go-code-from-github-repository" class="sidebar-link">Fetch the source Go code from Github repository</a></li><li class="sidebar-sub-header"><a href="/qstars/library/introduction.html#building-and-import-to-java-objective-c-swift" class="sidebar-link">Building and import to Java/Objective-C/Swift</a></li></ul></li><li><a href="/qstars/library/instruction.html" class="sidebar-link">Instruction on the interfaces in mobile app</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>jianqian app</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/qstars/jianqian/javaniolayer.html" class="sidebar-link">jianqian application</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="sdk-development-for-ios-and-android"><a href="#sdk-development-for-ios-and-android" aria-hidden="true" class="header-anchor">#</a> SDK development for iOS and Android</h1> <p>How to use Gomobile for library development for iOS and Android</p> <h2 id="environment-prerequisites"><a href="#environment-prerequisites" aria-hidden="true" class="header-anchor">#</a> Environment prerequisites:</h2> <ul><li>OSX</li> <li>xcode</li> <li>golang 1.5 +</li> <li>Android SDK</li> <li>Andorid NDK</li> <li>JDK</li></ul> <h2 id="gomobile-installation"><a href="#gomobile-installation" aria-hidden="true" class="header-anchor">#</a> Gomobile installation</h2> <p>Let’s start with gomobile installation:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>go get -v golang.org/x/mobile/cmd/gomobile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note: in OS X you need to have installed Xcode Command Line Tools. Then you need to initialize gomobile, this can be done one time in any work directory.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gomobile init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note: this command might take several minutes.</p> <h2 id="android-sdk-environment-setting"><a href="#android-sdk-environment-setting" aria-hidden="true" class="header-anchor">#</a> Android SDK environment setting</h2> <p>Download and unpack Android SDK to home directory, for example, <code>~/android-sdk</code>, and make the following command for API installation.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>~/android-sdk/tools/android sdk
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then you need to set environment variable:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>export ANDROID_HOME=$HOME&quot;/android-sdk&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>So far the environment for the library development and building is ready.</p> <h2 id="shared-go-code-for-android-and-ios"><a href="#shared-go-code-for-android-and-ios" aria-hidden="true" class="header-anchor">#</a> Shared GO-code for Android and iOS</h2> <p>The same code can be used for the future compilation for Android and iOS. Building of such cross platform code has its own constraints. As for now we can use only certain set of data types. We need to take it into consideration when developing application in Go. Let’s review in more detail the supported types:</p> <ul><li>int and float;</li> <li>string and boolean;</li> <li>[]byte</li> <li>function has to return only supported types, it may not return the result, it may return one or two types wherein the second type should be an error;</li> <li>interfaces could be used if they are exported to files of any supported type;</li> <li>struct type, only in case all fields meet the constraints.</li></ul> <p>So, if the type is not supported by gomobile bind command, you’ll see the similar error:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>panic: unsupported basic seqType: uint64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>It’s obvious that the set of supported types is very limited, but this is enough for the SDK implementation.</p> <h2 id="fetch-the-source-go-code-from-github-repository"><a href="#fetch-the-source-go-code-from-github-repository" aria-hidden="true" class="header-anchor">#</a> Fetch the source Go code from Github repository</h2> <p>The source code is based on Golang and the repository for the project is <a href="https://github.com/QOSGroup/qstars" target="_blank" rel="noopener noreferrer">https://github.com/QOSGroup/qstars<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.
It could be git cloned and downloaded to your local repo at first via:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>git clone https://github.com/QOSGroup/qstars.git
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The source code is under the folder <code>qstars/stub/ios/</code> with name of <code>starsdk.go</code></p> <p>Note: It is importtant to fetch the repository and corresponding packages this project, i.e. <code>qstars</code> depends. Otherwise, the gomobile would encounter buid failure.</p> <h2 id="building-and-import-to-java-objective-c-swift"><a href="#building-and-import-to-java-objective-c-swift" aria-hidden="true" class="header-anchor">#</a> Building and import to Java/Objective-C/Swift</h2> <p>Gobind generates target language (Java, Objective-C or Swift) bindings for each exported symbol in a Go package.
The code is generated automatically and is packed by <code>gomobile bind</code> command. More details you can find here <a href="https://golang.org/x/mobile/cmd/gomobile" target="_blank" rel="noopener noreferrer">https://golang.org/x/mobile/cmd/gomobile<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>Let’s start with flag -target that defines platform for generation. Here is an example for Android:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gomobile bind --target=android .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This command will generate <code>.aar</code> file from the current code. To import that file to Android Studio is pretty simple:</p> <ul><li>File ➤New ➤New Module ➤Import .JAR or .AAR package</li> <li>File ➤Project Structure ➤app ➤Dependencies ➤Add Module Dependency</li> <li>Add import: import go.logpackermobilesdk.Logpackermobilesdk</li></ul> <p>Note: In Java the name of the package for import always starts with go.</p> <p>Similar command is used for building Objective-C/Swift code.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>gomobile bind --target=ios .
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The folder <code>.framework</code> will be created in the current repository.</p> <p>This works for both Objective-C and Swift. Transfer <code>.framework</code> folder to Xcode’s file browser and add import to project:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>#import &quot;Logpackermobilesdk/Logpackermobilesdk.h&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Note: Go allows you to build not only SDK but also to compile the application to apk/ipa file from main.go file only without native mobile Ul.</p> <p>##Conclusion
Everybody understands that separate commands development for every mobile platform – is not a cheap and easy task. But it is essential for creation a high-quality product at this time. Our task we did in terms of cross platform development and used all its advantages:</p> <ul><li>Minimal development resources.</li> <li>High development speed.</li> <li>Simple decision-support in the future.</li></ul></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">11/1/2018, 8:04:44 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/qstars/sdk/app-init.html" class="prev">
          开发自己的联盟链业务模块
        </a></span> <span class="next"><a href="/qstars/library/instruction.html">
          Instruction on the interfaces in mobile app
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/qstars/assets/js/10.c1d5a24e.js" defer></script><script src="/qstars/assets/js/app.f2fdf5fd.js" defer></script>
  </body>
</html>
