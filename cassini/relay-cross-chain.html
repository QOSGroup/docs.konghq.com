<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简要说明 | Cassini Network</title>
    <meta name="description" content="Documentation for the Cassini Network.">
    
    
    <link rel="preload" href="/cassini/assets/css/styles.94e32edc.css" as="style"><link rel="preload" href="/cassini/assets/js/app.94e32edc.js" as="script"><link rel="preload" href="/cassini/assets/js/9.8e2e1e84.js" as="script"><link rel="prefetch" href="/cassini/assets/js/3.6d557102.js"><link rel="prefetch" href="/cassini/assets/css/1.styles.5a8ea794.css"><link rel="prefetch" href="/cassini/assets/js/1.5a8ea794.js"><link rel="prefetch" href="/cassini/assets/css/2.styles.c798916f.css"><link rel="prefetch" href="/cassini/assets/js/2.c798916f.js"><link rel="prefetch" href="/cassini/assets/js/4.4971db24.js"><link rel="prefetch" href="/cassini/assets/js/5.c76eeeef.js"><link rel="prefetch" href="/cassini/assets/js/6.2ff40ba9.js"><link rel="prefetch" href="/cassini/assets/js/7.d91d615d.js"><link rel="prefetch" href="/cassini/assets/js/8.c501d9c3.js">
    <link rel="stylesheet" href="/cassini/assets/css/1.styles.5a8ea794.css"><link rel="stylesheet" href="/cassini/assets/css/2.styles.c798916f.css"><link rel="stylesheet" href="/cassini/assets/css/styles.94e32edc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/cassini/" class="home-link router-link-active"><!----> <span class="site-name">Cassini Network</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://docs.qoschain.info/cassini/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to Cassini
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://docs.qoschain.info/cassini/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Back to Cassini
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Introduction</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/cassini/" class="sidebar-link">Cassini 跨链中继</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/cassini/cassini.html" class="sidebar-link">中继约定</a></li><li><a href="/cassini/quick_start.html" class="sidebar-link">quick start</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Cassini Deployment</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/cassini/cassini-deployment.html" class="sidebar-link">推荐部署：</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>Etcd Config</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/cassini/etcd_config.html" class="sidebar-link">Config file about ETCD</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><p><img src="https://raw.githubusercontent.com/QOSGroup/static/master/relay-cross-chain.png" alt="workflow"></p> <h3 id="简要说明"><a href="#简要说明" aria-hidden="true" class="header-anchor">#</a> 简要说明</h3> <p>上图仅描述了一个交易单向传输，执行完成并反馈结果的流程，反向执行交易时过程完全相同。</p> <p>对于基于Tendermint 技术栈的区块链，中继可以直接支持，如果接入链技术栈是非Tendermint 的，则需要引入Halley (封装Qcp协议的中继SDK以便进行适配)。</p> <p>出于安全的考虑，为了避免拜占庭节点等安全问题，中继SDK需要直接访问区块链和读取世界状态的权限，以避免数据被篡改等安全风险。</p> <h3 id="创建中继sdk的几点理由："><a href="#创建中继sdk的几点理由：" aria-hidden="true" class="header-anchor">#</a> 创建中继SDK的几点理由：</h3> <ul><li><p>跨链交易对接入链的支持不应依赖于特定的技术栈，应能够灵活的适配个区块链技术栈；</p></li> <li><p>中继应在严格遵循Qcp协议的基础上尽可能简化接入方的开发和工作量，同时应将功能相同的模块提取为共享的功能模块以减少重复的人力投入；</p></li> <li><p>中继是跨链交易的重要组件，需要支持高可用，不能随便重启，也不应随意增加不必要的代码（这么做会增加中继运行不稳定、出问题的风险）。</p></li></ul> <h3 id="中继sdk-支持的必要条件"><a href="#中继sdk-支持的必要条件" aria-hidden="true" class="header-anchor">#</a> 中继SDK 支持的必要条件</h3> <ol><li><p>需要接入链签发授权证书，以获得同步和读取区块链及状态数据的权限；</p></li> <li><p>接入链需要按照Qcp协议规范实现智能合约以保证区块链及状态数据可以被中继SDK适配；或接入链需要提供必要的技术及数据说明，以便于中继SDK对接入链进行适配；</p></li> <li><p>接入链需要提供支持Qcp协议规范的接口，以接收中继SDK提交的交易提案。</p></li></ol> <h3 id="交易具体执行流程"><a href="#交易具体执行流程" aria-hidden="true" class="header-anchor">#</a> 交易具体执行流程</h3> <p>参考上面的流程图：</p> <p>以Tendermint 为技术栈的区块链简称为“T链”（Tendermint Chain），基于非Tendermint 技术栈的区块链简称为“O链”（Other Chain）。</p> <ol><li><p>图中起点为“T链”某跨链交易在本链公示完成并确认已上链后，会发布交易事件；</p></li> <li><p>中继启动时会向“T链”发起交易事件订阅请求。“T链”接收到订阅请求，会将请求连接作为Web Socket管理起来，以便在出现交易事件时，向其输出事件数据；</p></li> <li><p>出于安全考虑，中继会同时向“T链”的多个节点订阅交易事件，当中继接收到交易事件后，会进行共识判断，通过共识的交易事件，会触发跨链交易的处理流程；</p></li> <li><p>中继首先会首先通过Qcp协议接口查询交易事件所指定的完整交易数据；</p></li> <li><p>查询到交易后，就会向交易事件中指定的目标链“O链”广播交易，而由于“O链”不是基于Tendermint 技术栈的，因此需要开发适配程序，以便将广播的交易提交给“O链”的链SDK端以执行交易；</p></li> <li><p>“O链”接收到中继广播的跨链交易后，经过交易的预提交（提交交易提案），执行，共识，上链等步骤之后，同样会在其链内发布交易事件；</p></li> <li><p>由于“O链”是非Tendermint 技术栈，因此中继仍然需要适配程序订阅到“O链”的交易事件；</p></li> <li><p>这样，中继SDK订阅到“O链”的交易事件后，即可用中继支持的Qcp协议规范方式发布交易事件，然后通过共识算法对交易事件进行共识，最后对通过共识的交易事件进行交易数据的查询；</p></li> <li><p>中继SDK查询交易数据时，需要适配程序以及“O链”授权的区块链及状态数据访问证书，获取交易数据；</p></li> <li><p>中继SDK查询到的交易为“T链”交易的反馈交易，同样中继会通过调用“T链”提供的Qcp规范接口来广播“O链”的反馈交易；</p></li> <li><p>当“T链”接收到“O链”反馈交易的广播则会进行后续反馈交易的处理流程，以最终完成交易。</p></li></ol></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">12/20/2018, 7:40:57 PM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/cassini/assets/js/9.8e2e1e84.js" defer></script><script src="/cassini/assets/js/app.94e32edc.js" defer></script>
  </body>
</html>
